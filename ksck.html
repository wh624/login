
<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cookieæ ¼å¼è½¬æ¢å·¥å…·</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            padding: 30px;
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 28px;
        }

        .section {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: bold;
            font-size: 14px;
        }

        textarea,
        input[type="text"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            font-family: 'Consolas', 'Monaco', monospace;
            transition: border-color 0.3s;
        }

        textarea:focus,
        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
        }

        textarea {
            min-height: 150px;
            resize: vertical;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin: 25px 0;
            flex-wrap: wrap;
        }

        button {
            flex: 1;
            min-width: 150px;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-convert {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-convert:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-reverse {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .btn-reverse:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(245, 87, 108, 0.4);
        }

        .btn-clear {
            background: #6c757d;
            color: white;
        }

        .btn-clear:hover {
            background: #5a6268;
        }

        .btn-copy {
            background: #28a745;
            color: white;
        }

        .btn-copy:hover {
            background: #218838;
        }

        .info {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #2196F3;
        }

        .info h3 {
            color: #1976D2;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .info ul {
            margin-left: 20px;
            color: #555;
        }

        .info li {
            margin: 5px 0;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>ğŸª Cookieæ ¼å¼è½¬æ¢å·¥å…·</h1>

        <div class="info">
            <h3>ğŸ“Œ ä½¿ç”¨è¯´æ˜</h3>
            <ul>
                <li>å°†Cookieæ ¼å¼è½¬æ¢ä¸ºå¿«æ‰‹APIå‚æ•°æ ¼å¼</li>
                <li>Cookieå­—æ®µå¿…å¡«ï¼ŒSaltå’ŒKawå¯é€‰</li>
                <li>è‡ªåŠ¨è¿›è¡ŒURLè§£ç å¤„ç†(å¦‚ %2C â†’ ,)</li>
                <li>è½¬æ¢åçš„æ ¼å¼ä½¿ç”¨åˆ†å·(;)åˆ†éš”ï¼Œæ— ç©ºæ ¼</li>
                <li>ä¿æŒå‚æ•°åŸå§‹é¡ºåºï¼Œkawå’Œsaltåœ¨æœ€å</li>
            </ul>
        </div>

        <div class="section">
            <label for="input">Cookieå­—ç¬¦ä¸² <span style="color:red;">*</span>:</label>
            <textarea id="input" placeholder=""></textarea>
        </div>

        <div class="section">
            <label for="salt">Salt (å¯é€‰ï¼Œå¦‚Cookieä¸­æœ‰åˆ™æ›¿æ¢):</label>
            <input type="text" id="salt" placeholder="">
        </div>

        <div class="section">
            <label for="kaw">Kaw (å¯é€‰ï¼Œå¦‚Cookieä¸­æœ‰åˆ™æ›¿æ¢):</label>
            <input type="text" id="kaw" placeholder="">
        </div>

        <div class="button-group">
            <button class="btn-convert" onclick="convertCookieToParams()">ğŸ”„ è½¬æ¢</button>
            <button class="btn-copy" onclick="copyResult()">ğŸ“‹ å¤åˆ¶ç»“æœ</button>
            <button class="btn-clear" onclick="clearAll()">ğŸ—‘ï¸ æ¸…ç©º</button>
        </div>

        <div class="section">
            <div
                style="background: #f0f9ff; padding: 12px; border-radius: 8px; border-left: 4px solid #0ea5e9; margin-bottom: 15px;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <strong style="color: #0369a1;">ğŸ”’ å”¯ä¸€æ€§ä¿è¯:</strong>
                        <span id="uniqueCount" style="color: #0c4a6e; margin-left: 10px;">å·²ç”Ÿæˆ 0 ä¸ªå”¯ä¸€ID</span>
                    </div>
                    <button onclick="clearHistory()"
                        style="padding: 6px 12px; background: #ef4444; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 12px;">æ¸…é™¤å†å²</button>
                </div>
            </div>
            <label for="output">è½¬æ¢ç»“æœ:</label>
            <textarea id="output" readonly placeholder="è½¬æ¢ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ..."></textarea>
        </div>
    </div>

    <script>
        // è§£æå‚æ•°å­—ç¬¦ä¸²
        function parseParams(str) {
            const params = {};
            const pairs = str.split(/;\s*/).filter(p => p.trim());

            pairs.forEach(pair => {
                const index = pair.indexOf('=');
                if (index !== -1) {
                    const key = pair.substring(0, index).trim();
                    const value = pair.substring(index + 1);
                    if (key) {
                        params[key] = value;
                    }
                }
            });

            return params;
        }

        // çœŸå®è®¾å¤‡æ•°æ®åº“
        const REAL_DEVICES = [
            {
                brand: 'Xiaomi',
                model: 'Mi 10 Pro',
                fullModel: 'Xiaomi(Mi 10 Pro)',
                soc: 'Qualcomm Snapdragon 865',
                socEncoded: 'Qualcomm%20Snapdragon%20865',
                platform: 'kona',
                ram: '8192',
                apiLevel: '33',
                sys: 'ANDROID_13',
                sh: '2340',
                sw: '1080',
                ddpi: '440',
                abi: 'arm64'
            },
            {
                brand: 'Xiaomi',
                model: 'Mi 11 Ultra',
                fullModel: 'Xiaomi(Mi 11 Ultra)',
                soc: 'Qualcomm Snapdragon 888',
                socEncoded: 'Qualcomm%20Snapdragon%20888',
                platform: 'lahaina',
                ram: '12288',
                apiLevel: '34',
                sys: 'ANDROID_14',
                sh: '3200',
                sw: '1440',
                ddpi: '515',
                abi: 'arm64'
            },
            {
                brand: 'Xiaomi',
                model: 'Redmi K40 Pro',
                fullModel: 'Xiaomi(Redmi K40 Pro)',
                soc: 'Qualcomm Snapdragon 888',
                socEncoded: 'Qualcomm%20Snapdragon%20888',
                platform: 'lahaina',
                ram: '8192',
                apiLevel: '33',
                sys: 'ANDROID_13',
                sh: '2400',
                sw: '1080',
                ddpi: '395',
                abi: 'arm64'
            },
            {
                brand: 'HUAWEI',
                model: 'Mate 40 Pro',
                fullModel: 'HUAWEI(Mate 40 Pro)',
                soc: 'HiSilicon Kirin 9000',
                socEncoded: 'HiSilicon%20Kirin%209000',
                platform: 'kirin9000',
                ram: '8192',
                apiLevel: '33',
                sys: 'ANDROID_13',
                sh: '2772',
                sw: '1344',
                ddpi: '456',
                abi: 'arm64'
            },
            {
                brand: 'OPPO',
                model: 'Find X5 Pro',
                fullModel: 'OPPO(Find X5 Pro)',
                soc: 'Qualcomm Snapdragon 8 Gen 1',
                socEncoded: 'Qualcomm%20Snapdragon%208%20Gen%201',
                platform: 'taro',
                ram: '12288',
                apiLevel: '34',
                sys: 'ANDROID_14',
                sh: '3216',
                sw: '1440',
                ddpi: '525',
                abi: 'arm64'
            },
            {
                brand: 'vivo',
                model: 'X90 Pro',
                fullModel: 'vivo(X90 Pro)',
                soc: 'MediaTek Dimensity 9200',
                socEncoded: 'MediaTek%20Dimensity%209200',
                platform: 'mt6985',
                ram: '12288',
                apiLevel: '34',
                sys: 'ANDROID_14',
                sh: '2800',
                sw: '1260',
                ddpi: '452',
                abi: 'arm64'
            }
        ];

        // ç”ŸæˆUUID v4
        function generateUUID() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
                const r = Math.random() * 16 | 0;
                const v = c === 'x' ? r : (r & 0x3 | 0x8);
                return v.toString(16);
            });
        }

        // åˆå§‹åŒ–å”¯ä¸€IDè®¡æ•°å™¨
        let idCounter = parseInt(localStorage.getItem('deviceIdCounter') || '0');
        const sessionId = Date.now().toString(36); // ä¼šè¯ID

        // ç”Ÿæˆç»å¯¹å”¯ä¸€çš„è®¾å¤‡IDï¼ˆåŸºäºæ—¶é—´æˆ³+UUID+è®¡æ•°å™¨ï¼‰
        function generateUniqueDeviceId() {
            let id;
            let attempts = 0;
            const maxAttempts = 100;

            // è·å–å·²ç”Ÿæˆçš„IDå†å²
            const usedIds = JSON.parse(localStorage.getItem('usedDeviceIds') || '[]');

            do {
                // ç»„åˆï¼šæ—¶é—´æˆ³(13ä½) + è®¡æ•°å™¨ + éšæœºUUIDç‰‡æ®µ
                const timestamp = Date.now().toString(16); // æ—¶é—´æˆ³è½¬16è¿›åˆ¶
                idCounter++;
                const counter = idCounter.toString(16).padStart(4, '0'); // è®¡æ•°å™¨
                const uuid = generateUUID().replace(/-/g, '').substring(0, 8); // UUIDç‰‡æ®µ

                // ç»„åˆæˆ16ä½å”¯ä¸€ID
                id = (timestamp + counter + uuid).substring(0, 16);

                attempts++;
            } while (usedIds.includes(id) && attempts < maxAttempts);

            // ä¿å­˜åˆ°å·²ä½¿ç”¨åˆ—è¡¨ï¼ˆåªä¿ç•™æœ€è¿‘10000ä¸ªï¼Œé¿å…å­˜å‚¨è¿‡å¤§ï¼‰
            usedIds.push(id);
            if (usedIds.length > 10000) {
                usedIds.shift();
            }
            localStorage.setItem('usedDeviceIds', JSON.stringify(usedIds));
            localStorage.setItem('deviceIdCounter', idCounter.toString());

            return id;
        }

        // ç”ŸæˆçœŸå®æ ¼å¼çš„Androidè®¾å¤‡IDï¼ˆç¡®ä¿å”¯ä¸€ï¼‰
        function generateRealDeviceId() {
            return generateUniqueDeviceId();
        }

        // ç”ŸæˆçœŸå®çš„ANDROID_IDæ ¼å¼ï¼ˆç¡®ä¿å”¯ä¸€ï¼‰
        function generateAndroidId() {
            return 'ANDROID_' + generateRealDeviceId();
        }

        // iOS è½¬ Androidï¼ˆä½¿ç”¨çœŸå®è®¾å¤‡æŒ‡çº¹ï¼‰
        function iosToAndroid(params) {
            // éšæœºé€‰æ‹©ä¸€ä¸ªçœŸå®è®¾å¤‡
            const device = REAL_DEVICES[Math.floor(Math.random() * REAL_DEVICES.length)];

            // ç”ŸæˆçœŸå®æ ¼å¼çš„è®¾å¤‡ID
            const did = generateAndroidId();
            const oDid = generateAndroidId();
            const rdid = generateAndroidId();

            // ç”Ÿæˆåˆç†çš„æ—¶é—´æˆ³ï¼ˆå½“å‰æ—¶é—´å‰åéšæœºåç§»ï¼‰
            const now = Date.now();
            const coldLaunchTime = now - Math.floor(Math.random() * 30000); // å¯åŠ¨æ—¶é—´åœ¨30ç§’å†…

            // æ ¹æ®è®¾å¤‡è®¡ç®—åˆç†çš„å†…å­˜å€¼
            const maxMemory = Math.floor(parseInt(device.ram) / 48).toString(); // çº¦1/48çš„æ€»å†…å­˜

            // éšæœºè¿è¥å•†
            const isps = ['CMCC', 'CUCC', 'CTCC'];
            const isp = params.isp || isps[Math.floor(Math.random() * isps.length)];

            // éšæœºç½‘ç»œç±»å‹
            const nets = ['WIFI', '4G', '5G'];
            const net = nets[Math.floor(Math.random() * nets.length)];

            // éšæœºæ¸ é“
            const channels = [
                'ALI_CPD,778',
                'XIAOMI,100',
                'HUAWEI,200',
                'OPPO,300',
                'VIVO,400',
                'MEIZU,500'
            ];
            const channel = channels[Math.floor(Math.random() * channels.length)];

            const androidParams = {
                'kpn': 'NEBULA',
                'kpf': 'ANDROID_PHONE',
                'did': did,
                'oDid': oDid,
                'ud': params.ud || params.userId || '',
                'androidApiLevel': device.apiLevel,
                'userId': params.userId || params.ud || '',
                'appver': '13.7.40.10539',
                'ver': '13.7',
                'nbh': '0',
                'kcv': '1602',
                'did_gt': now.toString(),
                'os': 'android',
                'client_key': '2ac2a76d',
                'kuaishou.api_st': params['kuaishou.api_st'] || params.token || '',
                'earphoneMode': Math.random() > 0.5 ? '1' : '2',
                'mod': device.fullModel,
                'isp': isp,
                'language': 'zh-cn',
                'did_tag': '0',
                'egid': params.egid || params.gid || params.global_id || '',
                'thermal': (10000 + Math.floor(Math.random() * 2000)).toString(),
                'net': net,
                'app': '0',
                'bottom_navigation': 'true',
                'android_os': '0',
                'boardPlatform': device.platform,
                'newOc': channel,
                'encoding': 'brotli',
                'priorityType': '1',
                'slh': '0',
                'country_code': 'cn',
                'hotfix_ver': '',
                'keyconfig_state': '1',
                'cdid_tag': '2',
                'sys': device.sys,
                'max_memory': maxMemory,
                'cold_launch_time_ms': coldLaunchTime.toString(),
                'oc': channel,
                'sh': device.sh,
                'deviceBit': '0',
                'browseType': '3',
                'ddpi': device.ddpi,
                'socName': device.socEncoded,
                'is_background': '0',
                'c': channel,
                'sw': device.sw,
                'ftt': '',
                'apptype': '22',
                'abi': 'arm32',
                'userRecoBit': '0',
                'device_abi': device.abi,
                'icaver': '1',
                'totalMemory': device.ram,
                'grant_browse_type': 'INITIALIZATION',
                'iuid': '',
                'rdid': rdid,
                'sbh': '90',
                'darkMode': Math.random() > 0.5 ? 'true' : 'false'
            };

            // ä¿æŒå…³é”®è®¤è¯å‚æ•°
            if (params.kaw) androidParams.kaw = params.kaw;
            if (params.salt) androidParams.salt = params.salt;

            return androidParams;
        }

        function convertCookieToParams() {
            const input = document.getElementById('input').value.trim();
            const saltInput = document.getElementById('salt').value.trim();
            const kawInput = document.getElementById('kaw').value.trim();

            // éªŒè¯å¿…å¡«å­—æ®µ
            if (!input) {
                alert('âŒ è¯·è¾“å…¥Cookieå­—ç¬¦ä¸²ï¼');
                return;
            }

            try {
                const params = parseParams(input);

                // å¦‚æœæä¾›äº†kawå’Œsaltï¼Œæ·»åŠ åˆ°params
                if (kawInput) {
                    params.kaw = kawInput.replace(/^kaw=/i, '');
                }
                if (saltInput) {
                    params.salt = saltInput.replace(/^salt=/i, '');
                }

                // iOSè½¬Android
                const result = iosToAndroid(params);

                // è½¬æ¢ä¸ºå­—ç¬¦ä¸²
                const output = Object.entries(result)
                    .map(([key, value]) => `${key}=${value}`)
                    .join(';');

                document.getElementById('output').value = output;

                // æ›´æ–°å”¯ä¸€IDè®¡æ•°
                updateUniqueCount();
            } catch (error) {
                alert('è½¬æ¢é”™è¯¯: ' + error.message);
            }
        }

        function copyResult() {
            const output = document.getElementById('output');
            if (!output.value) {
                alert('âŒ æ²¡æœ‰å¯å¤åˆ¶çš„å†…å®¹ï¼');
                return;
            }

            output.select();
            document.execCommand('copy');

            // å°è¯•ä½¿ç”¨æ–°çš„API
            try {
                navigator.clipboard.writeText(output.value);
            } catch (e) { }

            alert('âœ… å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
        }

        function clearAll() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å†…å®¹å—ï¼Ÿ')) {
                document.getElementById('input').value = '';
                document.getElementById('salt').value = '';
                document.getElementById('kaw').value = '';
                document.getElementById('output').value = '';
            }
        }

        // æ›´æ–°å”¯ä¸€IDè®¡æ•°æ˜¾ç¤º
        function updateUniqueCount() {
            const usedIds = JSON.parse(localStorage.getItem('usedDeviceIds') || '[]');
            const countElement = document.getElementById('uniqueCount');
            if (countElement) {
                countElement.textContent = `å·²ç”Ÿæˆ ${usedIds.length} ä¸ªå”¯ä¸€ID`;
            }
        }

        // æ¸…é™¤å†å²è®°å½•
        function clearHistory() {
            if (confirm('ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰IDå†å²è®°å½•å—ï¼Ÿ\nè¿™å°†é‡ç½®å”¯ä¸€æ€§è®¡æ•°å™¨ã€‚')) {
                localStorage.removeItem('usedDeviceIds');
                localStorage.removeItem('deviceIdCounter');
                idCounter = 0;
                updateUniqueCount();
                alert('âœ… å†å²è®°å½•å·²æ¸…é™¤ï¼');
            }
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.addEventListener('DOMContentLoaded', function () {
            updateUniqueCount();
        });
    </script>
</body>

</html>